#!/usr/bin/env node
'use strict';

process.title = 'ALKS';

var program = require('commander'),
    clc     = require('cli-color'),
    _       = require('underscore'),
    async   = require('async'),
    Table   = require('cli-table'),
    config  = require('../package.json'),
    Account = require('../lib/account'),
    utils   = require('../lib/utils');

program
    .version(config.version)
    .description('shows current developer configuration')
    .parse(process.argv);

var table = new Table({
    head: [clc.white.bold('Key'), clc.white.bold('Value')],
    colWidths: [25, 50]
});

async.series({
    // get account
    account: function(callback){
        Account.getAccount(callback);
    },
    password: function(callback){
        Account.getPassword(null, callback); // null means dont prompt
    }
},
function(err, results){
    _.each(results.account, function(val, key){
        table.push([key, _.isEmpty(val) ? '' : val]);
    });

    var password = !_.isEmpty(results.password) ? '**********' : clc.red('NOT SET');
    table.push(['Password', password]);

    console.error(clc.white.underline.bold('\nDeveloper Configuration'));
    console.error(clc.white(table.toString()));

});